(self["webpackChunkvue03"]=self["webpackChunkvue03"]||[]).push([[996],{4882:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return T}});var n=function(){var e=this,t=e._self._c;return t("div",[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"部门管理",name:"depmana"}},[t("DepMana")],1),t("el-tab-pane",{attrs:{name:"position",label:"职位管理"}},[t("PositionMana")],1),t("el-tab-pane",{attrs:{name:"joblevel",label:"职称管理"}},[t("JobLevelMana")],1),t("el-tab-pane",{attrs:{name:"ecmana",label:"奖惩规则"}},[t("EcMana")],1),t("el-tab-pane",{attrs:{name:"permissmana",label:"权限组"}},[t("PermissMana")],1)],1)],1)},s=[],a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"500px"}},[t("el-input",{attrs:{icon:"el-icon-search",size:"small",placeholder:"请输入部门名称..."},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),t("el-tree",{ref:"tree",attrs:{"expand-on-click-node":!1,data:e.depts,props:e.defaultProps,"filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function({node:i,data:n}){return t("span",{staticClass:"custom-tree-node",staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[t("span",[e._v(e._s(n.name))]),t("span",[t("el-button",{staticStyle:{padding:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showAddDeptView(n)}}},[e._v(" 添加部门 ")]),t("el-button",{staticStyle:{padding:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteDepartment(n)}}},[e._v(" 删除部门 ")])],1)])}}])}),t("el-dialog",{attrs:{title:"添加部门",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("table",[t("tr",[t("td",[e._v("父部门：")]),t("td",[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dep.parentId,callback:function(t){e.$set(e.dep,"parentId",t)},expression:"dep.parentId"}},e._l(e.allDetps,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),t("tr",[t("td",[e._v("部门名称：")]),t("td",[t("el-input",{model:{value:e.dep.name,callback:function(t){e.$set(e.dep,"name",t)},expression:"dep.name"}})],1)])])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.doAddDept}},[e._v("确 定")])],1)])],1)},o=[],l={name:"DepMana",watch:{filterText(e){this.$refs.tree.filter(e)}},data(){return{dep:{name:"",parentId:null},allDetps:[],dialogVisible:!1,filterText:"",defaultProps:{children:"children",label:"name"},depts:[]}},mounted(){this.initDepts()},methods:{removeDepFromDeps(e,t,i){for(let n=0;n<e.length;n++){let s=e[n];if(s.id==t.id)return e.splice(n,1),void(i&&0==e.length&&(i.isParent=!1));this.removeDepFromDeps(s.children,t,s)}},deleteDepartment(e){this.$confirm("此操作将永久删除【"+e.name+"】部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{e.isParent?this.$message.error("该部门下有子部门，删除失败"):this.deleteRequest("/system/basic/department/"+e.id).then((t=>{t&&this.removeDepFromDeps(this.depts,e)}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},addDep2Deps(e,t){e.forEach((e=>{e.id!=t.parentId?this.addDep2Deps(e.children,t):e.children=e.children.concat(t)}))},doAddDept(){this.postRequest("/system/basic/department/",this.dep).then((e=>{e&&(this.dialogVisible=!1,this.dep.name="",this.dep.parentId=null,this.addDep2Deps(this.depts,e.data))}))},showAddDeptView(e){this.initAllDepts(),this.dep.parentId=e.id,this.dialogVisible=!0},initAllDepts(){this.getRequest("/system/basic/department/list").then((e=>{e&&(this.allDetps=e)}))},filterNode(e,t){return!e||-1!==t.name.indexOf(e)},initDepts(){this.getRequest("/system/basic/department/").then((e=>{e&&(this.depts=e)}))}}},r=l,d=i(1001),c=(0,d.Z)(r,a,o,!1,null,"1ebd4d89",null),u=c.exports,p=function(){var e=this,t=e._self._c;return t("div",[e._v("奖惩规则")])},h=[],m={name:"EcMana"},f=m,b=(0,d.Z)(f,p,h,!1,null,"17049da3",null),v=b.exports,y=function(){var e=this,t=e._self._c;return t("div",[e._v("职称管理")])},g=[],_={name:"JobLevelMana"},x=_,k=(0,d.Z)(x,y,g,!1,null,"2082cf14",null),w=k.exports,P=function(){var e=this,t=e._self._c;return t("div",[t("el-collapse",{staticStyle:{width:"500px"},attrs:{accordion:""},on:{change:e.roleChange},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.roles,(function(i,n){return t("el-collapse-item",{key:n,attrs:{title:i.nameZh,name:i.name}},[t("div",[t("el-tree",{ref:"tree",refInFor:!0,attrs:{data:e.menus,"show-checkbox":"","node-key":"id","default-checked-keys":e.selectedMenus,props:e.defaultProps}}),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{size:"mini"}},[e._v("取消修改")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.updateRoleMenu(i.id,n)}}},[e._v("确认修改")])],1)],1)])})),1)],1)},D=[],S={name:"PermissMana",data(){return{activeName:"",selectedMenus:[],roles:[],menus:[],defaultProps:{children:"children",label:"name"}}},mounted(){this.initRoles()},methods:{updateRoleMenu(e,t){let i=this.$refs.tree[t].getCheckedKeys(),n="/system/basic/role/?rid="+e;i.forEach((e=>{n+="&mid="+e})),this.putRequest(n).then((e=>{e&&this.initRoles()}))},roleChange(e){e&&(this.initMenus(),this.loadSelectedMenus(e))},loadSelectedMenus(e){this.getRequest("/system/basic/role/selectedMenus?name="+e).then((e=>{e&&(this.selectedMenus=e)}))},initMenus(){this.getRequest("/system/basic/role/menu").then((e=>{e&&(this.menus=e)}))},initRoles(){this.getRequest("/system/basic/role/").then((e=>{e&&(this.roles=e)}))}}},M=S,C=(0,d.Z)(M,P,D,!1,null,"72457f94",null),R=C.exports,z=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入职位名称","suffix-icon":"el-icon-plus"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPosition.apply(null,arguments)}},model:{value:e.position.name,callback:function(t){e.$set(e.position,"name",t)},expression:"position.name"}}),t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addPosition}},[e._v("添加职位")])],1),t("div",[t("el-upload",{staticStyle:{display:"inline-flex"},attrs:{"show-file-list":!1,"on-success":e.onSuccess,"on-error":e.onError,"before-upload":e.beforeUpload,disabled:e.uploadBtn.disabled,action:"/system/basic/position/import"}},[t("el-button",{attrs:{type:"success",icon:e.uploadBtn.icon,disabled:e.uploadBtn.disabled}},[e._v(e._s(e.uploadBtn.name)+" ")])],1),t("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportPositionData}},[e._v("导出数据")])],1)]),t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.positions,stripe:"",border:""}},[t("el-table-column",{attrs:{prop:"id",label:"编号",width:"80"}}),t("el-table-column",{attrs:{prop:"name",label:"职位名称",width:"150"}}),t("el-table-column",{attrs:{prop:"createDate",label:"创建时间"}}),t("el-table-column",{attrs:{label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用"},on:{change:function(t){return e.enabledChange(i.row)}},model:{value:i.row.enabled,callback:function(t){e.$set(i.row,"enabled",t)},expression:"scope.row.enabled"}})]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"min"},on:{click:function(t){return e.showEditPositionView(i.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"min",type:"danger"},on:{click:function(t){return e.deletePosition(i.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-pagination",{attrs:{background:"","page-sizes":[5,10,15,20],layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑职位",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("table",[t("tr",[t("td",[e._v("职位名称：")]),t("td",[t("el-input",{model:{value:e.editPos.name,callback:function(t){e.$set(e.editPos,"name",t)},expression:"editPos.name"}})],1)]),t("tr",[t("td",[e._v("是否启用：")]),t("td",[t("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用"},model:{value:e.editPos.enabled,callback:function(t){e.$set(e.editPos,"enabled",t)},expression:"editPos.enabled"}})],1)])])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.doUpdatePosition}},[e._v("确 定")])],1)])],1)},B=[],V={name:"PositionMana",data(){return{total:0,size:10,dialogVisible:!1,page:1,uploadBtn:{name:"导入数据",disabled:!1,icon:"el-icon-upload2"},editPos:{},positions:[],position:{name:""}}},mounted(){this.initPositions()},methods:{sizeChange(e){this.size=e,this.initPositions()},currentChange(e){this.page=e,this.initPositions()},onError(e,t,i){this.uploadBtn={name:"导入数据",disabled:!1,icon:"el-icon-upload2"}},onSuccess(e,t,i){this.$message.success(e.msg),this.uploadBtn={name:"导入数据",disabled:!1,icon:"el-icon-upload2"}},beforeUpload(){this.uploadBtn.name="正在上传",this.uploadBtn.disabled=!0,this.uploadBtn.icon="el-icon-loading"},exportPositionData(){window.open("/system/basic/position/export","_blank")},enabledChange(e){this.putRequest("/system/basic/position/",e).then((e=>{e&&this.initPositions()}))},doUpdatePosition(){this.putRequest("/system/basic/position/",this.editPos).then((e=>{e&&(this.dialogVisible=!1,this.initPositions())}))},showEditPositionView(e){this.dialogVisible=!0,this.editPos=JSON.parse(JSON.stringify(e))},deletePosition(e){this.$confirm("此操作将永久删除【"+e.name+"】职位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.deleteRequest("/system/basic/position/"+e.id).then((e=>{e&&this.initPositions()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},addPosition(){this.postRequest("/system/basic/position/",this.position).then((e=>{e&&(this.position.name="",this.initPositions())}))},initPositions(){this.getRequest("/system/basic/position/?page="+this.page+"&size="+this.size).then((e=>{e&&(this.positions=e.data,this.total=e.total)}))}}},N=V,$=(0,d.Z)(N,z,B,!1,null,"40ea7a1b",null),q=$.exports,E={name:"SysBasic",components:{DepMana:u,EcMana:v,JobLevelMana:w,PermissMana:R,PositionMana:q},data(){return{activeName:"permissmana"}}},Z=E,I=(0,d.Z)(Z,n,s,!1,null,"775c25e4",null),T=I.exports},8768:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("div",[e._v("系统管理")])},s=[],a={name:"SysCfg"},o=a,l=i(1001),r=(0,l.Z)(o,n,s,!1,null,"4ba79f0f",null),d=r.exports},5040:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("div",[e._v("数据库备份")])},s=[],a={name:"SysData"},o=a,l=i(1001),r=(0,l.Z)(o,n,s,!1,null,"6872d635",null),d=r.exports},1150:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("div",[e._v("操作员管理")])},s=[],a={name:"SysHr"},o=a,l=i(1001),r=(0,l.Z)(o,n,s,!1,null,"2a538ad0",null),d=r.exports},6785:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("div",[e._v("初始化数据库")])},s=[],a={name:"SysInit"},o=a,l=i(1001),r=(0,l.Z)(o,n,s,!1,null,"12530923",null),d=r.exports},7731:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("div",[e._v("操作日志管理")])},s=[],a={name:"SysLog"},o=a,l=i(1001),r=(0,l.Z)(o,n,s,!1,null,"69e38cb2",null),d=r.exports},4996:function(e,t,i){var n={"./SysBasic.vue":4882,"./SysCfg.vue":8768,"./SysData.vue":5040,"./SysHr.vue":1150,"./SysInit.vue":6785,"./SysLog.vue":7731};function s(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id=4996}}]);
//# sourceMappingURL=996.b8178e58.js.map